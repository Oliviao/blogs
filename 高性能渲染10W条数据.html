<!doctype html>
<html>
    <head>
    </head>
    <body>
        <ul id="container"></ul>
    </body>
    <script>
        var start = Date.now()

        let ul = document.getElementById('container')
        var i = 0
        
        function loop() {
            i++
            window.requestAnimationFrame(function(){
                var fragment = document.createDocumentFragment()
                for(var i=0; i < 1000; i++) {
                    var li = document.createElement('li')
                    li.innerText = i
                    fragment.appendChild(li)
                }
                ul.appendChild(fragment)
                if(i<100) {
                    loop()
                }
            })
        }
        loop()

        console.log('JS运行时间：', Date.now() - start)
        setTimeout(()=> {
            console.log('总运行时间：',Date.now() - start)
        }, 0)
    </script>
</html>